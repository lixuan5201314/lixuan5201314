<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TXTæ–‡æœ¬åˆ†å‰²å·¥å…· - ç‰ˆæœ¬ 2.0 ğŸ¾</title>
    <style>
        /* èƒŒæ™¯è®¾ç½® */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: var(--bg-image, none);
            background-size: cover;
            background-position: center;
            filter: none;
            opacity: 1.9;
            z-index: -2;
            transition: all 0.5s ease;
        }

        /* ä¿®å¤é»‘è‰²å—é—®é¢˜ï¼Œç¡®ä¿ WebGL è¦†ç›–å…¨å± */
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow-y: auto; /* ç¡®ä¿é¡µé¢å¯ä»¥æ»šåŠ¨ */
        }

        /* WebGL ç”»å¸ƒï¼ˆé›¨æ»´æ•ˆæœï¼‰ */
        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        /* ä¸»è¦ UI è®¾è®¡ */
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            min-height: 100vh;
            margin: 0;
            color: #333;
            background-color: rgba(244, 244, 244, 0.8); /* èƒŒæ™¯é€æ˜åº¦ */
            transition: all 0.3s ease;
        }

        .main-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background-color: rgba(255, 255, 255, 0.8); /* è®¾ç½®é€æ˜åº¦ */
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            opacity: 0.69; /* è®¾ç½®é€æ˜åº¦ */
        }

        h1 {
            color: #FF69B4;
            margin-bottom: 30px;
            font-family: "Comic Sans MS", sans-serif;
            text-shadow: 2px 2px 5px rgba(255, 182, 193, 0.69);
        }
.disclaimer {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    text-align: center;
    font-size: 14px;
    color: red;
    font-weight: bold;
    background-color: rgba(255, 255, 255, 0.8); /* å¯ä»¥åŠ ä¸ªèƒŒæ™¯è‰²ä½¿æ–‡å­—æ›´åŠ é†’ç›® */
    padding: 10px 0;
    z-index: 1000;
}
        /* æŒ‰é’®æ ·å¼ */
        button {
            padding: 12px 24px;
            font-size: 16px;
            margin: 10px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            transition: all 0.2s;
            background-color: #FF69B4;
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(255, 182, 193, 0.6);
        }

        button:hover {
            background-color: #FF1493;
            transform: translateY(-2px);
        }

        button:active {
            background-color: #FF3385;
            transform: translateY(2px);
        }

        /* çŒ«å’ªæŒ‰é’®æ ·å¼ */
        .cat-button {
            background-color: #FFB6C1;
            color: #800080;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 16px;
            margin: 10px;
            cursor: pointer;
            border: none;
        }

        .cat-button:hover {
            background-color: #FF69B4;
        }

        /* é€‚åº”çŒ«å’ªè¡¨æƒ… */
        .cat-icon {
            font-size: 20px;
            margin-right: 8px;
        }

        /* é€‰æ‹©æ¡†æ ·å¼ */
        select {
            font-size: 16px;
            padding: 8px;
            margin: 15px 0;
            border-radius: 5px;
            background-color: #FFB6C1;
            border: none;
            color: #800080;
        }

        select:hover {
            background-color: #FF69B4;
        }

        /* æ–‡ä»¶åˆ—è¡¨å®¹å™¨æ ·å¼ */
        .file-list {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }

        /* æ¯ä¸ªä¸‹è½½é“¾æ¥çš„æ ·å¼ */
        .file-list a {
            display: block;
            width: 80%; /* è®¾å®šä¸‹è½½é“¾æ¥å®½åº¦ï¼Œé¿å…è¶…å‡ºå®¹å™¨ */
            margin: 10px 0;
            text-align: center;
            transition: transform 0.2s ease;
        }

        /* å¢åŠ åŠ¨ç”»æ•ˆæœ */
        .file-list a:hover {
            transform: scale(1.1);
        }

        /* å¤œé—´æ¨¡å¼ */
        body.night-mode {
            color: #eee;
            background-color: rgba(34, 34, 34, 0.7);
        }

        body.night-mode .main-container {
            background-color: rgba(51, 51, 51, 0.9);
            color: #eee;
        }
    </style>
</head>
<body>
    <canvas id="rainCanvas"></canvas> <!-- WebGL é›¨æ»´æ•ˆæœ -->

    <div class="main-container">
        <h1>TXTæ–‡æœ¬åˆ†å‰²å·¥å…· - ç‰ˆæœ¬ 2.0 ğŸ¾</h1>

        <div class="input-group">
            <input type="file" id="fileInput" accept=".txt" onchange="validateFileType()">
            <button id="splitBtn">åˆ†å‰²æ–‡ä»¶ ğŸ±</button>
        </div>

        <div class="file-list" id="fileList"></div>

        <!-- å£çº¸é€‰æ‹©æ¡† -->
        <div class="disclaimer">
            <a href="https://astrobox.online/open?source=res&res=èµ„æºåç§°&provider=official" target="_blank" rel="noopener noreferrer">
  <img src="https://astrobox.online/goab/en/white.svg">
            </a>
    <p>âš ï¸ ä¸Šä¼ æ–‡ä»¶çš„è´£ä»»å…¨æƒç”±ä¸Šä¼ è€…è´Ÿè´£ï¼Œç¦æ­¢ä¸Šä¼ è¿åä¸­åäººæ°‘å…±å’Œå›½æ³•å¾‹çš„æ–‡ä»¶åŒ…æ‹¬ä½†ä¸é™äºæ·«ç§½ï¼Œé»„è‰²å°è¯´ï¼Œæœ¬ç«™ä»¥åŠç®¡ç†è€…ä¸è´Ÿä»»ä½•è´£ä»»åŒ…æ‹¬ä½†ä¸é™äºæ³•å¾‹è´£ä»»!</p>
</div>
        <div>
            <label for="wallpaperSelect"> ğŸ±:</label>
            <select id="wallpaperSelect">
                <option value="ecy">äºŒæ¬¡å…ƒå£çº¸</option>
                <option value="clysj">ä»é›¶å¼€å§‹å£çº¸</option>
                <option value="mn">çŒ«å¨˜å£çº¸</option>
                <option value="ys">åŸç¥å£çº¸</option>
            </select>
        </div>
        
        <br><br>
        <button class="cat-button" onclick="toggleNightMode()">åˆ‡æ¢ä¸»é¢˜ ğŸŒ™</button>
    </div>

    <script>
        function setBackground() {
            let category = localStorage.getItem('wallpaperCategory') || 'mn';
            let imgUrl = `https://api.lxtu.cn/api.php?category=${category}&t=${Date.now()}`;
            document.body.style.setProperty('--bg-image', `url('${imgUrl}')`);
        }

        // ç›‘å¬é€‰æ‹©æ¡†å˜åŒ–
        document.getElementById("wallpaperSelect").addEventListener("change", function() {
            let category = this.value;
            localStorage.setItem('wallpaperCategory', category);
            setBackground();
        });

        function toggleNightMode() {
            document.body.classList.toggle("night-mode");
            localStorage.setItem('nightMode', document.body.classList.contains("night-mode") ? 'enabled' : 'disabled');
        }

        function initSettings() {
            if (localStorage.getItem('nightMode') === 'enabled') {
                document.body.classList.add("night-mode");
            }
            setBackground();
        }

        initSettings();
function validateFileType() {
    const fileInput = document.getElementById("fileInput");
    if (fileInput.files.length > 0) {
        const fileName = fileInput.files[0].name;
        if (!fileName.endsWith(".txt")) {
            alert("å–µ~ åªèƒ½ä¸Šä¼  TXT æ–‡ä»¶å“¦ï¼");
            fileInput.value = ""; // æ¸…ç©ºæ–‡ä»¶é€‰æ‹©
        }
    }
}
        document.getElementById("splitBtn").addEventListener("click", function() {
            const fileInput = document.getElementById("fileInput");
            if (!fileInput.files.length) {
                alert("å–µ~ è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæ–‡ä»¶å“¦ï¼");
                return;
            }

            const file = fileInput.files[0];
            const reader = new FileReader();

            reader.onload = function(e) {
                const content = e.target.result;
                const numChunks = prompt("è¯·è¾“å…¥åˆ†å‰²æ•°é‡ï¼ˆ2-10ï¼‰å–µ~:", "2");

                if (numChunks && numChunks >= 2 && numChunks <= 10) {
                    const chunkSize = Math.ceil(content.length / numChunks);
                    const fileList = document.getElementById("fileList");
                    fileList.innerHTML = ''; // æ¸…ç©ºä¹‹å‰çš„æ–‡ä»¶åˆ—è¡¨

                    for (let i = 0; i < numChunks; i++) {
                        const chunk = content.substring(i * chunkSize, (i + 1) * chunkSize);
                        const link = document.createElement("a");
                        const blob = new Blob([chunk], { type: "text/plain" });

                        link.href = URL.createObjectURL(blob);
                        link.download = file.name.replace(".txt", `_part${i + 1}.txt`);
                        link.textContent = `å–µ~ ä¸‹è½½ç¬¬ ${i + 1} éƒ¨åˆ† ğŸ¾`;
                        link.classList.add("cat-button");  // ä½¿ç”¨çŒ«å’ªæ ·å¼
                        fileList.appendChild(link);
                    }
                } else {
                    alert("è¯·è¾“å…¥2-10ä¹‹é—´çš„æœ‰æ•ˆæ•°å­—å–µ~ï¼");
                }
            };

            reader.readAsText(file);
        });

        // **ç»ˆæç‰ˆé›¨æ»´æ•ˆæœ**
        function startRainEffect() {
            const canvas = document.getElementById("rainCanvas");
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const ctx = canvas.getContext("2d");
            let drops = [];

            for (let i = 0; i < 100; i++) {
                drops.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    speed: Math.random() * 2 + 1
                });
            }

            function drawRain() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = "rgba(255, 255, 255, 0.2)";
                drops.forEach(drop => {
                    ctx.beginPath();
                    ctx.arc(drop.x, drop.y, 2, 0, Math.PI * 2);
                    ctx.fill();
                    drop.y += drop.speed;
                    if (drop.y > canvas.height) {
                        drop.y = 0;
                    }
                });

                requestAnimationFrame(drawRain);
            }

            drawRain();
        }

        startRainEffect();
    </script>
</body>
</html>
